<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AI News Feed Summary</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: sans-serif; background: #f4f4f4; padding: 20px; }
    .news-item { background: white; margin: 10px 0; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    button { background: #6b46c1; color: white; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer; }
    h2 { color: #4B0082; }
  </style>
</head>
<body>
  <h2>ðŸ“° Times of India - Top Stories</h2>
  <div id="news-container">Loading...</div>

  <script>
    async function loadRSS() {
      const proxyUrl = "https://api.codetabs.com/v1/proxy/?quest=";
      const feedUrl = "http://timesofindia.indiatimes.com/rssfeedstopstories.cms";
      const fullUrl = proxyUrl + encodeURIComponent(feedUrl);

      const response = await fetch(fullUrl);
      const text = await response.text();
      const xml = new window.DOMParser().parseFromString(text, "text/xml");
      const items = xml.querySelectorAll("item");

      const container = document.getElementById("news-container");
      container.innerHTML = "";

      items.forEach(item => {
        const title = item.querySelector("title").textContent;
        const description = item.querySelector("description").textContent;
        const link = item.querySelector("link").textContent;

        const div = document.createElement("div");
        div.className = "news-item";
        div.innerHTML = `
          <strong>${title}</strong>
          <p>${description}</p>
          <button onclick="openAISummary('${encodeURIComponent(link)}', \`${encodeURIComponent(description)}\`)">
            AI Summary & Audio
          </button>
        `;
        container.appendChild(div);
      });
    }

    function openAISummary(link, description) {
      localStorage.setItem('articleLink', decodeURIComponent(link));
      localStorage.setItem('articleText', decodeURIComponent(description));
      window.open('ai-summary.html', '_blank');
    }

    loadRSS();
  </script>
</body>
</html>
